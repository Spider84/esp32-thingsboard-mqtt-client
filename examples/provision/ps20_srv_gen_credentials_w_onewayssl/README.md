| Supported Targets | ESP32 | ESP32-C2 | ESP32-C3 | ESP32-H2 | ESP32-S3 |
| ----------------- | ----- | -------- | -------- | -------- | -------- |

# Device provisioning - Credentials generated by the ThingsBoard server - MQTTS (MQTT over SSL)

* [中文版](./README_CN.md)

This example implements the following functions:

* Device provisioning - Credentials generated by the ThingsBoard server - MQTTS (MQTT over SSL)
  * Allowing creating new devices with **device name**  - (Users cannot control the server to automatically generate credentials for new devices)
     * Use Case PSA11: server_generate_access_token_without_ssl
     * ~~Use Case PSA21: server_generate_basic_mqtt_credential_c_without_ssl~~
     * ~~Use Case PSA22: server_generate_basic_mqtt_credential_u_p_without_ssl~~
     * ~~Use Case PSA23: server_generate_basic_mqtt_credential_c_u_p_without_ssl~~
  * Checking pre-provisioned devices with **device name** - (The user manually generates the credential certificate of the new device on the server)
     * Use Case PSC11：server_generate_access_token_without_ssl
     * Use Case PSC21：server_generate_basic_mqtt_credential_c_without_ssl
     * Use Case PSC22：server_generate_basic_mqtt_credential_u_p_without_ssl （only for ESP-IDF-v5.x)
     * Use Case PSC23: server_generate_basic_mqtt_credential_c_u_p_without_ssl
* Publish telemetry: temprature, humidity
  * Publish: `{"temprature":25,"humidity":26}`

Refer [here](https://thingsboard.io/docs/user-guide/device-provisioning/).

## Hardware Required

* A development board with ESP32/ESP32-C3/ESP32-H2/ESP32-C2/ESP32-S3 SoC (e.g., ESP32-DevKitC, ESP-WROVER-KIT, etc.)
* A USB cable for Power supply and programming

See [Development Boards](https://www.espressif.com/en/products/devkits) for more information about it.

## How to Use Example

1. ThingsBoard CE/PE SSL configuration using PEM certificates file

   See [MQTT over SSL - using Self-signed PEM certificates file](../../.docs/mqtt-over-ssl-ssl-configuration-using-pem-certificates-file.md)


1. Follow-up test steps [here](../ps10_srv_gen_credentials_wo_ssl/README.md).

   **Note:** Then project configuration:

   ```bash
   idf.py menuconfig
   ```

   ```menuconfig
   ...
   Example ThingsBoard MQTT Configuration  ---> 
      Transport server address  --->
         (8883) Port
   ...
   ```

## Troubleshooting

For any technical queries, please open an [issue](https://github.com/liang-zhu-zi/esp32-thingsboard-mqtt-client/issues) on GitHub. We will get back to you soon.
